"use strict";function go(e,t){var a="";return void 0!==t&&!0!==t||(a=base_url),document.location.href=a+e,!1}function go_back(){return window.history.back(),!1}function new_window(e,t){return void 0===t&&(t="_blank"),window.open(e,t),!1}function reload(e){return(e=void 0===e?!1:e)?location.reload():(e=document.location.href,document.location.href=e),!1}function set_yesno_checkers(e){return $("."+e).unbind("click"),$("."+e).on("click",function(){var e=$(this).attr("data-target"),t=$("#"+e).prop("checked");$("#"+e).prop("checked",!t),$("#"+e).trigger("change")}),!1}$=jQuery;const rpp_snippets_sortable_parent="#snippets-form",rpp_snippets_sortable_params={axis:"y",handle:".title",items:".rpp-admin-snippet"},list_params_category={ajax:{delay:250,type:"post",url:rpp_ajax.ajax_url,dataType:"json",data:function(e){return{term:e.term,type:"category",_ajax_nonce:rpp_ajax.nonce,action:"revpress_list_options"}},processResults:function(e){return{results:e}}}},list_params_tag={ajax:{delay:250,type:"post",url:rpp_ajax.ajax_url,dataType:"json",data:function(e){return{term:e.term,type:"tag",_ajax_nonce:rpp_ajax.nonce,action:"revpress_list_options"}},processResults:function(e){return{results:e}}}},list_params_post={ajax:{delay:250,type:"post",url:rpp_ajax.ajax_url,dataType:"json",data:function(e){return{term:e.term,type:"post_page",_ajax_nonce:rpp_ajax.nonce,action:"revpress_list_options"}},processResults:function(e){return{results:e}}}};function selectSourceSnippet(e){$("#target-snippet-id").val(e),$("#code-source").val(""),$("#import-box-wait").hide(),$("#import-box-code").show()}function parseSourceSnippet(){let t=parseInt($("#target-snippet-id").val());var e={_ajax_nonce:rpp_ajax.nonce,action:"revpress_parse_code",code:encodeURI($("#code-source").val())};$("#import-box-code").hide(),$("#import-box-wait").show(),$.post(rpp_ajax.ajax_url,e,function(e){e.success?$("#snippet-"+t+"-params").val(e.params):alert("Parsing the snippet code failed!"),tb_remove()})}function showSnippetParams(e){$("#params-box-info").hide(),$("#params-box-wait").show();e={_ajax_nonce:rpp_ajax.nonce,action:"revpress_show_params",params:$("#snippet-"+e+"-params").val()};$.post(rpp_ajax.ajax_url,e,function(e){$("#params-box-wait").hide(),$("#params-box-info").html(e.success?e.html:"<p>Failed to render list of parameters</p>"),$("#params-box-info").show()})}function removeSnippet(e){confirm("Are you sure you want to remove this snippet?")&&($("#snippet-remove-id").val(e),$("#snippet-remove-form").submit())}$(document).ready(function(){$("#rpp-header").css("background",$("body").css("background")),$("#wpbody-content .notice").each(function(e,t){t=$(t).detach();$("#rpp-notices").append(t)}),$(".rule-type").on("change",function(){var e=parseInt($(this).attr("data-id")),t=$(this).val();"category"===t?($("#snippet-"+e+"-rule-category-box").show(),$("#snippet-"+e+"-rule-category-list").hasClass("select2-hidden-accessible")||$("#snippet-"+e+"-rule-category-list").select2(list_params_category)):$("#snippet-"+e+"-rule-category-box").hide(),"tag"===t?($("#snippet-"+e+"-rule-tag-box").show(),$("#snippet-"+e+"-rule-tag-list").hasClass("select2-hidden-accessible")||$("#snippet-"+e+"-rule-tag-list").select2(list_params_tag)):$("#snippet-"+e+"-rule-tag-box").hide(),"post_page"===t?($("#snippet-"+e+"-rule-post-page-box").show(),$("#snippet-"+e+"-rule-post-page-list").hasClass("select2-hidden-accessible")||$("#snippet-"+e+"-rule-post-page-list").select2(list_params_post)):$("#snippet-"+e+"-rule-post-page-box").hide()}),$("#exclude-roles").on("change",function(){$(this).prop("checked")?($("#exclude-roles-box").show(),$("#exclude-role-list").hasClass("select2-hidden-accessible")||$("#exclude-role-list").select2()):$("#exclude-roles-box").hide()}),$(".select-box.active .rule-multi-select").each(function(e,t){switch($(t).attr("data-list-type")){case"category":$(t).select2(list_params_category);break;case"tag":$(t).select2(list_params_tag);break;case"post_page":$(t).select2(list_params_post);break;default:$(t).select2()}}),$("#priority-mode").on("change",function(){$(this).prop("checked")?($("#exclude-roles-container").slideUp(180),$(".rpp-admin-snippet .priority").show(),$(".snippet-body").slideUp(180,function(){$(".rpp-admin-snippet .title").addClass("drag"),$(rpp_snippets_sortable_parent).sortable(rpp_snippets_sortable_params)})):($(".rpp-admin-snippet .title").removeClass("drag"),$(".rpp-admin-snippet .priority").hide(),$(".snippet-body").slideDown(180),$("#exclude-roles-container").slideDown(180,function(){$(rpp_snippets_sortable_parent).sortable("destroy")}))}),$("#snippets-save-button").on("click",function(){$(rpp_snippets_sortable_parent).hasClass("ui-sortable")||$(rpp_snippets_sortable_parent).sortable(rpp_snippets_sortable_params),$("#snippets-order").val($(rpp_snippets_sortable_parent).sortable("toArray",{attribute:"data-id"}).join(",")),$("#snippets-form").submit()}),set_yesno_checkers("yesno"),$(".rpp-admin-snippet .action.preview").on("click",function(){var e=$(this).attr("data-id");let t=$(this).attr("href");e={_ajax_nonce:rpp_ajax.nonce,action:"revpress_prepare_preview",params:$("#snippet-"+e+"-params").val()};return $.post(rpp_ajax.ajax_url,e,function(e){e.success?new_window(t):alert("Preparing the preview failed!")}),!1})});
//# sourceMappingURL=admin.min.js.map
